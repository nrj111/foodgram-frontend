@tailwind components;
@layer components {
  .create-food-page { @apply min-h-dvh flex items-start justify-center p-6 px-4 bg-[radial-gradient(1200px_600px_at_10%_-10%,var(--color-surface-alt)_0%,transparent_45%),radial-gradient(1200px_600px_at_110%_110%,var(--color-surface-alt)_0%,transparent_45%),var(--color-bg)] animate-profile-fade; }
  .create-food-card { @apply w-full max-w-[720px] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-md shadow-md p-6 flex flex-col gap-5 transition; }
  .create-food-header { @apply grid gap-2; }
  .create-food-title { @apply text-xl font-bold md:text-2xl; }
  .create-food-subtitle { @apply text-[var(--color-text-secondary)] text-sm; }
  .create-food-form { @apply grid gap-5 md:gap-6; }
  .field-group { @apply grid gap-1.5; }
  .field-group label { @apply text-[.70rem] uppercase tracking-wider font-bold text-[var(--color-text-secondary)]; }
  .field-group input[type=text],
  .field-group input[type=number],
  .field-group textarea { @apply border border-[var(--color-border)] bg-[var(--color-surface-alt)] rounded-sm px-3 py-2 text-[var(--color-text)] outline-none transition; }
  .field-group textarea { @apply resize-y min-h-[96px]; }
  .field-group input:focus-visible,
  .field-group textarea:focus-visible { @apply border-[var(--color-accent)] bg-[var(--color-surface)] ring-0; }
  .file-input-hidden { @apply sr-only; }
  .file-dropzone { @apply border border-dashed border-[var(--color-border)] bg-[color-mix(in_srgb,var(--color-surface-alt)_70%,transparent)] rounded-sm p-6 cursor-pointer grid place-items-center text-center gap-3 text-[var(--color-text-secondary)] transition relative overflow-hidden; }
  .file-dropzone:hover { @apply border-[var(--color-accent)] bg-[var(--color-surface-alt)]; }
  .file-dropzone:active { @apply translate-y-[2px]; }
  .file-dropzone-text { @apply text-[var(--color-text)] font-semibold; }
  .file-hint { @apply text-[.7rem]; }
  .file-chip { @apply mt-3 flex flex-wrap items-center gap-3 w-full bg-[var(--color-surface-alt)] border border-[var(--color-border)] rounded-sm px-3 py-2; }
  .file-chip-name { @apply font-semibold truncate; }
  .file-chip-size { @apply text-[.75rem] text-[var(--color-text-secondary)] ml-auto; }
  .file-chip-actions { @apply inline-flex gap-2; }
  .btn-ghost { @apply bg-transparent border border-transparent text-[var(--color-accent)] rounded-full px-3 py-1 font-bold text-xs tracking-wide cursor-pointer transition; }
  .btn-ghost:hover { @apply bg-[color-mix(in_srgb,var(--color-accent)_12%,transparent)]; }
  .btn-ghost.danger { @apply text-[var(--color-danger)]; }
  .btn-ghost.danger:hover { @apply bg-[color-mix(in_srgb,var(--color-danger)_12%,transparent)]; }
  .video-preview { @apply w-full rounded-sm overflow-hidden border border-dashed border-[var(--color-border)] bg-[var(--color-surface-alt)] grid place-items-center animate-share-pop; }
  .video-preview-el { @apply w-full h-full object-contain bg-black; }
  .form-actions { @apply flex gap-3; }
  .btn-primary { @apply bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white font-bold tracking-wide px-4 py-3 rounded-sm transition disabled:opacity-60 disabled:cursor-not-allowed; }
  .upload-overlay { @apply fixed inset-0 bg-black/55 z-[1000] grid place-items-center text-white font-bold gap-3; }
  .spinner { @apply relative grid place-items-center w-[84px] h-[84px] animate-spin-progress; --ring-thickness:6px; }
  .spinner::before { content:""; @apply absolute inset-0 rounded-full; background:conic-gradient(var(--color-accent)0deg,var(--color-accent-hover) calc(var(--progress)*1deg),rgba(255,255,255,.15) calc(var(--progress)*1deg),rgba(255,255,255,.08) 360deg); -webkit-mask:radial-gradient(circle at center,transparent 0 calc(50% - var(--ring-thickness)),#000 calc(50% - var(--ring-thickness) + 1px) 100%); mask:radial-gradient(circle at center,transparent 0 calc(50% - var(--ring-thickness)),#000 calc(50% - var(--ring-thickness) + 1px) 100%); }
  .spinner::after { content:""; @apply absolute inset-[calc(var(--ring-thickness)+3px)] rounded-[14px]; background:url('https://ik.imagekit.io/nrj/Foodgram%20Logo_3xjVvij1vu?updatedAt=1758693456925') center/100% 100% no-repeat; }
  [data-uploading='true'] .create-food-card { @apply blur-[1px] brightness-90; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .create-food-page.fade-page,
  .video-preview { animation: none; }
}
/* Inputs */
.field-group input[type="text"],
.field-group input[type="file"],
.field-group textarea {
  appearance: none;
  border: 1px solid var(--color-border);
  background: var(--color-surface-alt);
  padding: 10px 12px;
  font: inherit;
  border-radius: var(--radius-sm);
  outline: none;
  color: var(--color-text);
  transition: border-color var(--transition-base), background var(--transition-base), box-shadow var(--transition-base);
}

.field-group textarea { resize: vertical; min-height: 96px; }

.field-group input:focus-visible,
.field-group textarea:focus-visible {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-accent) 55%, transparent);
  background: var(--color-surface);
}

.small-note { font-size: .78rem; color: var(--color-text-secondary); }

/* Custom file input */
.file-input-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0; }

.file-dropzone {
  border: 1.5px dashed var(--color-border);
  background: color-mix(in srgb, var(--color-surface-alt) 70%, transparent);
  border-radius: var(--radius-sm);
  padding: var(--space-6);
  cursor: pointer;
  user-select: none;
  transition: border-color var(--transition-base), background var(--transition-base), box-shadow var(--transition-base), transform var(--transition-base);
}

.file-dropzone:hover { border-color: var(--color-accent); background: var(--color-surface-alt); }
.file-dropzone:active { transform: translateY(1px); }
.file-dropzone:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }

.file-dropzone-inner { display: grid; place-items: center; text-align: center; gap: var(--space-3); color: var(--color-text-secondary); }
.file-icon { color: var(--color-accent); }
.file-dropzone-text { color: var(--color-text); }
.file-hint { font-size: .8rem; }

.error-text { color: var(--color-danger); font-size: .85rem; margin-top: var(--space-2); }

.file-chip {
  margin-top: var(--space-3);
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-3);
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  width: 100%;
  background: var(--color-surface-alt);
  border: 1px solid var(--color-border);
}

.file-chip-name { font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.file-chip-size { font-size: .85rem; color: var(--color-text-secondary); margin-left: auto; }
.file-chip-actions { display: inline-flex; align-items: center; gap: 8px; }

.btn-ghost {
  background: transparent;
  border: 1px solid transparent;
  color: var(--color-accent);
  padding: 6px 10px;
  border-radius: 999px;
  font: inherit;
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
  transition: background var(--transition-base), color var(--transition-base);
}

.btn-ghost:hover { background: color-mix(in srgb, var(--color-accent) 12%, transparent); }
.btn-ghost:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
.btn-ghost.danger { color: var(--color-danger); }
.btn-ghost.danger:hover { background: color-mix(in srgb, var(--color-danger) 12%, transparent); }

/* Video preview */
.video-preview {
  width: 100%;
  border-radius: var(--radius-sm);
  overflow: hidden;
  border: 1px dashed var(--color-border);
  background: var(--color-surface-alt);
  display: grid;
  place-items: center;
  /* Prevent tall videos from stretching the card */
}

.video-preview-el {
  width: 100%;
  height: 100%;
  display: block;
  background: #000;
  object-fit: contain;
}

/* Actions */
.form-actions { display: flex; gap: var(--space-3); }

.btn-primary {
  background: var(--color-accent);
  color: #fff;
  border: none;
  border-radius: var(--radius-sm);
  padding: 12px 16px;
  font: inherit;
  font-weight: 700;
  letter-spacing: .3px;
  cursor: pointer;
  transition: background var(--transition-base), transform var(--transition-base), box-shadow var(--transition-base);
}

.btn-primary:hover { background: var(--color-accent-hover); }
.btn-primary:active { transform: translateY(1px); }
.btn-primary:disabled { opacity: .6; cursor: not-allowed; }

/* Responsive */
@media (min-width: 768px) {
  .create-food-title { font-size: 1.6rem; }
}

/* Smooth theme transitions */
.create-food-card,
.field-group input,
.field-group textarea { transition: background 200ms ease, color 200ms ease, border-color 200ms ease; }

.upload-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  z-index: 1000;
  display: grid;
  place-items: center;
  color: #fff;
  font-weight: 700;
  gap: 12px;
}

.spinner {
  --size: 84px;
  --ring-thickness: 6px; /* was 11px */
  --progress: 0;
  width: var(--size);
  height: var(--size);
  position: relative;
  display: grid;
  place-items: center;
  filter: drop-shadow(0 4px 14px rgba(0,0,0,.35));
  animation: upload-progress-spin 2.2s linear infinite;
  background: none;
  border: 0;
}

.spinner::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background:
    conic-gradient(
      var(--color-accent) 0deg,
      var(--color-accent-hover) calc(var(--progress) * 1deg),
      rgba(255,255,255,0.15) calc(var(--progress) * 1deg),
      rgba(255,255,255,0.08) 360deg
    );
  -webkit-mask: radial-gradient(circle at center,
      transparent 0 calc(50% - var(--ring-thickness)),
      #000 calc(50% - var(--ring-thickness) + 1px) 100%);
  mask: radial-gradient(circle at center,
      transparent 0 calc(50% - var(--ring-thickness)),
      #000 calc(50% - var(--ring-thickness) + 1px) 100%);
}

.spinner::after {
  content: "";
  position: absolute;
  inset: calc(var(--ring-thickness) + 3px); /* was + 4px */
  border-radius: 14px;
  background:
    url('https://ik.imagekit.io/nrj/Foodgram%20Logo_3xjVvij1vu?updatedAt=1758693456925')
    center / 100% 100% no-repeat;
  image-rendering: -webkit-optimize-contrast;
  backface-visibility: hidden;
  transform: translateZ(0);
  pointer-events: none;
}

.create-food-page.fade-page { animation: fade-page .5s ease; }
@keyframes fade-page { from { opacity:0; transform: translateY(12px); } to { opacity:1; transform: none; } }

.file-dropzone {
  position: relative;
  overflow: hidden;
}
.file-dropzone::after {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.12), transparent 60%);
  opacity:0;
  transition: opacity .5s ease;
}
.file-dropzone:hover::after { opacity:.35; }

.video-preview { animation: preview-in .45s cubic-bezier(.4,0,.2,1); }
@keyframes preview-in { from { opacity:0; transform: scale(.97); } to { opacity:1; transform: scale(1); } }

[data-uploading='true'] .create-food-card { filter: blur(1px) brightness(.9); transition: filter .4s ease; }

/* Tailwind CSS Components */
@tailwind components;
@layer components {
  .create-food-page { @apply min-h-dvh flex items-start justify-center p-6 px-4 bg-[radial-gradient(1200px_600px_at_10%_-10%,var(--color-surface-alt)_0%,transparent_45%),radial-gradient(1200px_600px_at_110%_110%,var(--color-surface-alt)_0%,transparent_45%),var(--color-bg)] animate-profile-fade; }
  .create-food-card { @apply w-full max-w-[720px] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-md shadow-md p-6 flex flex-col gap-5 transition; }
  .create-food-header { @apply grid gap-2; }
  .create-food-title { @apply text-xl font-bold md:text-2xl; }
  .create-food-subtitle { @apply text-[var(--color-text-secondary)] text-sm; }
  .create-food-form { @apply grid gap-5 md:gap-6; }
  .field-group { @apply grid gap-1.5; }
  .field-group label { @apply text-[.70rem] uppercase tracking-wider font-bold text-[var(--color-text-secondary)]; }
  .field-group input[type=text],
  .field-group input[type=number],
  .field-group textarea { @apply border border-[var(--color-border)] bg-[var(--color-surface-alt)] rounded-sm px-3 py-2 text-[var(--color-text)] outline-none transition; }
  .field-group textarea { @apply resize-y min-h-[96px]; }
  .field-group input:focus-visible,
  .field-group textarea:focus-visible { @apply border-[var(--color-accent)] bg-[var(--color-surface)] ring-0; }
  .file-input-hidden { @apply sr-only; }
  .file-dropzone { @apply border border-dashed border-[var(--color-border)] bg-[color-mix(in_srgb,var(--color-surface-alt)_70%,transparent)] rounded-sm p-6 cursor-pointer grid place-items-center text-center gap-3 text-[var(--color-text-secondary)] transition relative overflow-hidden; }
  .file-dropzone:hover { @apply border-[var(--color-accent)] bg-[var(--color-surface-alt)]; }
  .file-dropzone:active { @apply translate-y-[2px]; }
  .file-dropzone-text { @apply text-[var(--color-text)] font-semibold; }
  .file-hint { @apply text-[.7rem]; }
  .file-chip { @apply mt-3 flex flex-wrap items-center gap-3 w-full bg-[var(--color-surface-alt)] border border-[var(--color-border)] rounded-sm px-3 py-2; }
  .file-chip-name { @apply font-semibold truncate; }
  .file-chip-size { @apply text-[.75rem] text-[var(--color-text-secondary)] ml-auto; }
  .file-chip-actions { @apply inline-flex gap-2; }
  .btn-ghost { @apply bg-transparent border border-transparent text-[var(--color-accent)] rounded-full px-3 py-1 font-bold text-xs tracking-wide cursor-pointer transition; }
  .btn-ghost:hover { @apply bg-[color-mix(in_srgb,var(--color-accent)_12%,transparent)]; }
  .btn-ghost.danger { @apply text-[var(--color-danger)]; }
  .btn-ghost.danger:hover { @apply bg-[color-mix(in_srgb,var(--color-danger)_12%,transparent)]; }
  .video-preview { @apply w-full rounded-sm overflow-hidden border border-dashed border-[var(--color-border)] bg-[var(--color-surface-alt)] grid place-items-center animate-share-pop; }
  .video-preview-el { @apply w-full h-full object-contain bg-black; }
  .form-actions { @apply flex gap-3; }
  .btn-primary { @apply bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white font-bold tracking-wide px-4 py-3 rounded-sm transition disabled:opacity-60 disabled:cursor-not-allowed; }
  .upload-overlay { @apply fixed inset-0 bg-black/55 z-[1000] grid place-items-center text-white font-bold gap-3; }
  .spinner { @apply relative grid place-items-center w-[84px] h-[84px] animate-spin-progress; --ring-thickness:6px; }
  .spinner::before { content:""; @apply absolute inset-0 rounded-full; background:conic-gradient(var(--color-accent)0deg,var(--color-accent-hover) calc(var(--progress)*1deg),rgba(255,255,255,.15) calc(var(--progress)*1deg),rgba(255,255,255,.08) 360deg); -webkit-mask:radial-gradient(circle at center,transparent 0 calc(50% - var(--ring-thickness)),#000 calc(50% - var(--ring-thickness) + 1px) 100%); mask:radial-gradient(circle at center,transparent 0 calc(50% - var(--ring-thickness)),#000 calc(50% - var(--ring-thickness) + 1px) 100%); }
  .spinner::after { content:""; @apply absolute inset-[calc(var(--ring-thickness)+3px)] rounded-[14px]; background:url('https://ik.imagekit.io/nrj/Foodgram%20Logo_3xjVvij1vu?updatedAt=1758693456925') center/100% 100% no-repeat; }
  [data-uploading='true'] .create-food-card { @apply blur-[1px] brightness-90; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .create-food-page.fade-page,
  .video-preview { animation: none; }
}
